<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ—¥ä»˜è¨ˆç®—ï¼ˆæ—¥ä»˜ï¼‹æ—¥æ•°ï¼‰</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#101a2f;
      --text:#eaf0ff;
      --muted:#a9b6d3;
      --line:rgba(255,255,255,.12);
      --accent:#7dd3fc;
      --accent2:#a7f3d0;
      --danger:#fda4af;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      background: radial-gradient(1200px 800px at 20% 0%, rgba(125,211,252,.18), transparent 50%),
                  radial-gradient(1200px 800px at 80% 20%, rgba(167,243,208,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
      line-height:1.6;
    }
    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 24px 16px 60px;
    }
    header{
      margin: 10px 0 18px;
    }
    h1{
      font-size: clamp(22px, 3.3vw, 32px);
      margin: 0 0 6px;
      letter-spacing: .02em;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 14px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      margin-top: 16px;
    }
    @media (max-width: 840px){
      .grid{grid-template-columns:1fr}
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      backdrop-filter: blur(8px);
    }

    .row{
      display:grid;
      gap:10px;
      margin: 10px 0 14px;
    }

    label{
      font-size: 13px;
      color: var(--muted);
    }

    input[type="date"], input[type="number"]{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
      font-size: 16px;
    }
    input[type="date"]:focus, input[type="number"]:focus{
      border-color: rgba(125,211,252,.65);
      box-shadow: 0 0 0 4px rgba(125,211,252,.12);
    }

    .inline{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.12);
    }

    .btns{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    button{
      border: 1px solid var(--line);
      background: rgba(0,0,0,.18);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 12px;
      cursor:pointer;
      font-size: 15px;
      transition: transform .05s ease, border-color .15s ease, background .15s ease;
      user-select: none;
    }
    button:hover{
      border-color: rgba(125,211,252,.55);
      background: rgba(125,211,252,.10);
    }
    button:active{ transform: translateY(1px); }

    .primary{
      border-color: rgba(125,211,252,.55);
      background: rgba(125,211,252,.14);
    }
    .danger{
      border-color: rgba(253,164,175,.55);
      background: rgba(253,164,175,.10);
    }

    .result{
      display:grid;
      gap: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.14);
      width: fit-content;
      max-width: 100%;
    }
    .big{
      font-size: 20px;
      font-weight: 700;
      letter-spacing: .02em;
      overflow-wrap:anywhere;
    }
    .muted{ color: var(--muted); font-size: 13px; margin:0; }
    .hint{
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }
    .ok{
      color: var(--accent2);
      font-weight: 600;
      font-size: 13px;
      min-height: 18px;
    }
    .err{
      color: var(--danger);
      font-weight: 600;
      font-size: 13px;
      min-height: 18px;
    }

    .footerNote{
      margin-top: 14px;
      font-size: 12px;
      color: var(--muted);
    }

    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 8px;
      border: 1px solid var(--line);
      background: rgba(0,0,0,.15);
      color: var(--text);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>æ—¥ä»˜è¨ˆç®—ï¼ˆæ—¥ä»˜ï¼‹æ—¥æ•°ï¼‰</h1>
      <p class="sub">æ—¥ä»˜ã«æ—¥æ•°ã‚’è¶³ã—ã¦ã€æ–°ã—ã„æ—¥ä»˜ã¨æ›œæ—¥ã‚’å‡ºã—ã¾ã™ï¼ˆè² æ•°ã§å¼•ãç®—ã‚‚OKï¼‰ã€‚</p>
    </header>

    <div class="grid">
      <!-- å…¥åŠ› -->
      <section class="card" aria-label="å…¥åŠ›">
        <div class="row">
          <label for="baseDate">å¹´æœˆæ—¥</label>
          <input id="baseDate" type="date" />
        </div>

        <div class="row">
          <label for="days">ï¼‹æ—¥æ•°ï¼ˆãƒã‚¤ãƒŠã‚¹ã‚‚OKï¼‰</label>
          <input id="days" type="number" inputmode="numeric" placeholder="ä¾‹ï¼š30 / -7" />
        </div>

        <div class="row">
          <div class="inline" role="group" aria-label="åˆæ—¥ã®æ•°ãˆæ–¹">
            <input id="includeStart" type="checkbox" />
            <label for="includeStart" style="margin:0; color:var(--text);">
              åˆæ—¥ã‚’æ•°ãˆã‚‹ï¼ˆãƒã‚§ãƒƒã‚¯ONã§ã€Œä»Šæ—¥ã‚’1æ—¥ç›®ã€ã¨ã—ã¦è¨ˆç®—ï¼‰
            </label>
          </div>
          <p class="hint">
            ä¾‹ï¼š<span class="kbd">2026/02/13</span> ã‹ã‚‰ <span class="kbd">1æ—¥å¾Œ</span><br/>
            ãƒ»æ•°ãˆãªã„ â†’ <span class="kbd">2026/02/14</span><br/>
            ãƒ»æ•°ãˆã‚‹ â†’ <span class="kbd">2026/02/13</span>
          </p>
        </div>

        <div class="btns">
          <button class="primary" id="calcBtn" type="button">è¨ˆç®—ã™ã‚‹</button>
          <button id="todayBtn" type="button">ä»Šæ—¥ã‚’å…¥ã‚Œã‚‹</button>
          <button class="danger" id="resetBtn" type="button">ãƒªã‚»ãƒƒãƒˆ</button>
        </div>

        <div style="margin-top:12px">
          <div class="err" id="errorText"></div>
          <div class="ok" id="okText"></div>
        </div>

        <div class="footerNote">
          â€» æ™‚åˆ»ã‚„ç¥æ—¥ãƒ»å–¶æ¥­æ—¥ã¯è€ƒãˆãšã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šã®æ—¥ä»˜ã ã‘ã‚’è¨ˆç®—ã—ã¾ã™ã€‚
        </div>
      </section>

      <!-- çµæœ -->
      <section class="card" aria-label="çµæœ">
        <div class="result">
          <div>
            <p class="muted">è¨ˆç®—çµæœï¼ˆå¹´æœˆæ—¥ãƒ»æ›œæ—¥ï¼‰</p>
            <div class="pill">
              <span>ğŸ“…</span>
              <span class="big" id="resultDate">â€”</span>
            </div>
          </div>

          <div>
            <p class="muted">ã‚³ãƒ”ãƒ¼ç”¨ï¼ˆYYYY-MM-DDï¼‰</p>
            <div class="pill">
              <span>ğŸ“‹</span>
              <span class="big" id="resultISO">â€”</span>
            </div>
          </div>

          <div class="btns">
            <button id="copyBtn" type="button">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
          </div>

          <p class="hint" id="detailText">å…¥åŠ›ã™ã‚‹ã¨ã€ã“ã“ã«èª¬æ˜ãŒå‡ºã¾ã™ã€‚</p>
        </div>
      </section>
    </div>
  </div>

  <script>
    // =========================
    // ã“ã“ã‹ã‚‰JSï¼ˆè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
    // =========================

    const baseDateEl = document.getElementById('baseDate');
    const daysEl = document.getElementById('days');
    const includeStartEl = document.getElementById('includeStart');

    const resultDateEl = document.getElementById('resultDate');
    const resultISOEl = document.getElementById('resultISO');
    const detailTextEl = document.getElementById('detailText');

    const errorTextEl = document.getElementById('errorText');
    const okTextEl = document.getElementById('okText');

    const calcBtn = document.getElementById('calcBtn');
    const todayBtn = document.getElementById('todayBtn');
    const resetBtn = document.getElementById('resetBtn');
    const copyBtn = document.getElementById('copyBtn');

    const WEEK = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];

    // âœ… ä»Šæ—¥ã‚’ date input ã«å…¥ã‚Œã‚‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«æ—¥ä»˜ï¼‰
    function setToday() {
      const now = new Date();
      const yyyy = now.getFullYear();
      const mm = String(now.getMonth() + 1).padStart(2, '0');
      const dd = String(now.getDate()).padStart(2, '0');
      baseDateEl.value = `${yyyy}-${mm}-${dd}`;
    }

    // âœ… "YYYY-MM-DD" ã‚’ã€Œãã®æ—¥ã®æ­£åˆ(12:00)ã€ã¨ã—ã¦Dateã«ã™ã‚‹
    // ï¼ˆæ·±å¤œ0æ™‚ã ã¨ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚„å¤æ™‚é–“ã§ã‚ºãƒ¬ã‚‹äº‹æ•…ãŒãŸã¾ã«ã‚ã‚‹ã®ã§å®‰å…¨ç­–ï¼‰
    function parseYMDToLocalNoon(ymd) {
      const [y, m, d] = ymd.split('-').map(Number);
      return new Date(y, m - 1, d, 12, 0, 0, 0);
    }

    function formatJP(dateObj) {
      const y = dateObj.getFullYear();
      const m = dateObj.getMonth() + 1;
      const d = dateObj.getDate();
      const w = WEEK[dateObj.getDay()];
      return `${y}/${String(m).padStart(2,'0')}/${String(d).padStart(2,'0')}ï¼ˆ${w}ï¼‰`;
    }

    function formatISO(dateObj) {
      const y = dateObj.getFullYear();
      const m = String(dateObj.getMonth() + 1).padStart(2,'0');
      const d = String(dateObj.getDate()).padStart(2,'0');
      return `${y}-${m}-${d}`;
    }

    function clearMessages() {
      errorTextEl.textContent = '';
      okTextEl.textContent = '';
    }

    function showError(msg) {
      errorTextEl.textContent = msg;
      okTextEl.textContent = '';
    }

    function showOk(msg) {
      okTextEl.textContent = msg;
      errorTextEl.textContent = '';
    }

    // âœ… è¨ˆç®—
    function calculate() {
      clearMessages();

      const baseYMD = baseDateEl.value;
      if (!baseYMD) {
        showError('å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
        return;
      }

      const daysStr = String(daysEl.value ?? '').trim();
      if (daysStr === '' || Number.isNaN(Number(daysStr))) {
        showError('æ—¥æ•°ã‚’æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼š30 / -7ï¼‰ã€‚');
        return;
      }

      const days = Number(daysStr);

      // åˆæ—¥ã‚’æ•°ãˆã‚‹ãªã‚‰ã€å®Ÿè³ªã€Œdays-1ã€ã‚’è¶³ã™
      const addDays = includeStartEl.checked ? (days - 1) : days;

      const base = parseYMDToLocalNoon(baseYMD);
      const result = new Date(base);
      result.setDate(result.getDate() + addDays);

      resultDateEl.textContent = formatJP(result);
      resultISOEl.textContent = formatISO(result);

      const baseJP = formatJP(base);
      const modeText = includeStartEl.checked ? 'åˆæ—¥ã‚’æ•°ãˆã‚‹' : 'åˆæ—¥ã‚’æ•°ãˆãªã„';

      detailTextEl.textContent =
        `${baseJP} ã«ã€Œ${days}æ—¥ã€(${modeText}) ã‚’é©ç”¨ â†’ ${formatJP(result)}`;

      showOk('è¨ˆç®—ã—ã¾ã—ãŸã€‚');
    }

    // âœ… ãƒªã‚»ãƒƒãƒˆ
    function resetAll() {
      baseDateEl.value = '';
      daysEl.value = '';
      includeStartEl.checked = false;
      resultDateEl.textContent = 'â€”';
      resultISOEl.textContent = 'â€”';
      detailTextEl.textContent = 'å…¥åŠ›ã™ã‚‹ã¨ã€ã“ã“ã«èª¬æ˜ãŒå‡ºã¾ã™ã€‚';
      clearMessages();
    }

    // âœ… ã‚³ãƒ”ãƒ¼
    async function copyResult() {
      clearMessages();
      const text = resultISOEl.textContent;
      if (!text || text === 'â€”') {
        showError('å…ˆã«è¨ˆç®—ã—ã¦ãã ã•ã„ã€‚');
        return;
      }
      try {
        await navigator.clipboard.writeText(text);
        showOk(`ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼š${text}`);
      } catch (e) {
        showError('ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ãŒç¦æ­¢ã®å¯èƒ½æ€§ï¼‰ã€‚');
      }
    }

    // ãƒœã‚¿ãƒ³æ“ä½œ
    calcBtn.addEventListener('click', calculate);
    todayBtn.addEventListener('click', () => { setToday(); showOk('ä»Šæ—¥ã‚’å…¥åŠ›ã—ã¾ã—ãŸã€‚'); });
    resetBtn.addEventListener('click', resetAll);
    copyBtn.addEventListener('click', copyResult);

    // å…¥åŠ›ã—ãŸã‚‰è‡ªå‹•ã§å†è¨ˆç®—ï¼ˆæ“ä½œãŒãƒ©ã‚¯ï¼‰
    baseDateEl.addEventListener('change', calculate);
    daysEl.addEventListener('input', () => {
      // å…¥åŠ›ä¸­ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¸›ã‚‰ã™ãŸã‚ã€ç©ºãªã‚‰è¨ˆç®—ã—ãªã„
      if (String(daysEl.value).trim() !== '') calculate();
    });
    includeStartEl.addEventListener('change', calculate);

    // åˆæœŸçŠ¶æ…‹ï¼šä»Šæ—¥ã‚’å…¥ã‚Œã¦ãŠãï¼ˆå¥½ã¿ã§æ¶ˆã—ã¦OKï¼‰
    setToday();
    daysEl.value = 0;
    calculate();
  </script>
</body>
</html>
